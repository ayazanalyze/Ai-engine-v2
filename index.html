<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HYDROZEN-By Team ZenFlow</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'zen-green': '#00F0A0',
            'zen-blue': '#6366F1',
            'zen-red': '#EF4444'
          }
        }
      }
    }
  </script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      background-color: #0f172a;
      color: #f8fafc;
      overflow-x: hidden;
    }

    /* Particle Background */
    .data-particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: #00F0A0;
      border-radius: 50%;
      pointer-events: none;
      animation: float 8s linear infinite;
      opacity: 0.3;
      z-index: 0;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0px);
        opacity: 0;
      }
      10% {
        opacity: 0.3;
      }
      90% {
        opacity: 0.3;
      }
      100% {
        transform: translateY(-100px) translateX(50px);
        opacity: 0;
      }
    }

    .ai-panel {
      border: 3px solid #00F0A0;
      background-color: #1e293b;
      box-shadow: 0 0 30px rgba(0,240,160,0.2);
      position: relative;
      z-index: 10;
    }

    h3, h4 {
      font-weight: 900;
    }

    /* Holographic Text Effect */
    .holographic {
      background: linear-gradient(45deg, #00F0A0, #6366F1, #00F0A0);
      background-size: 300% 300%;
      animation: hologram 3s ease infinite;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    @keyframes hologram {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .btn-send {
      position: relative;
      overflow: hidden;
      background: #4f46e5;
      color: #fff;
      font-weight: 700;
      border: none;
      border-radius: 0.75rem;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: all 0.4s ease;
    }

    .btn-send::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, #22d3ee, #6366f1);
      transition: all 0.4s ease;
      z-index: 0;
    }

    .btn-send:hover::before {
      animation: sweep 1s forwards;
    }

    @keyframes sweep {
      0% { left: -100%; }
      100% { left: 0; }
    }

    .btn-send span {
      position: relative;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.6rem;
      transition: transform 0.3s ease;
    }

    .btn-send:hover {
      transform: translateY(-2px) scale(1.02);
    }

    .quick-btn {
      background: #334155;
      color: #e2e8f0;
      font-weight: 600;
      border: none;
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      cursor: pointer;
      transition: all 0.4s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .quick-btn:hover {
      background: #00F0A0;
      color: #0f172a;
      transform: translateY(-2px) scale(1.03);
    }

    .chat-input {
      background-color: #1e293b;
      color: #00F0A0;
      border: 2px solid #00F0A0;
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      font-weight: 600;
      font-size: 1rem;
      width: 100%;
    }

    .chat-input:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,240,160,0.3);
    }

    .message-ai {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-left: 4px solid #00F0A0;
      box-shadow: 0 4px 12px rgba(0,240,160,0.1);
      animation: slideInLeft 0.5s ease;
    }

    .message-user {
      background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(99,102,241,0.2);
      animation: slideInRight 0.5s ease;
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-50px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(50px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Weather Card Animations */
    .weather-excellent {
      border: 3px solid #00F0A0;
      background: linear-gradient(135deg, #1e293b 0%, rgba(0,240,160,0.1) 100%);
      box-shadow: 0 0 25px rgba(0,240,160,0.3);
      animation: glow-green 2s ease-in-out infinite alternate;
    }

    .weather-good {
      border: 3px solid #6366F1;
      background: linear-gradient(135deg, #1e293b 0%, rgba(99,102,241,0.1) 100%);
      box-shadow: 0 0 25px rgba(99,102,241,0.2);
      animation: glow-blue 2s ease-in-out infinite alternate;
    }

    .weather-poor {
      border: 3px solid #EF4444;
      background: linear-gradient(135deg, #1e293b 0%, rgba(239,68,68,0.1) 100%);
      box-shadow: 0 0 25px rgba(239,68,68,0.2);
      animation: glow-red 2s ease-in-out infinite alternate;
    }

    @keyframes glow-green {
      0% { box-shadow: 0 0 25px rgba(0,240,160,0.3); }
      100% { box-shadow: 0 0 35px rgba(0,240,160,0.5); }
    }

    @keyframes glow-blue {
      0% { box-shadow: 0 0 25px rgba(99,102,241,0.2); }
      100% { box-shadow: 0 0 35px rgba(99,102,241,0.4); }
    }

    @keyframes glow-red {
      0% { box-shadow: 0 0 25px rgba(239,68,68,0.2); }
      100% { box-shadow: 0 0 35px rgba(239,68,68,0.4); }
    }

    /* Status Indicators */
    .status-dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
    }

    .status-active {
      background: #00F0A0;
      box-shadow: 0 0 10px #00F0A0;
      animation: pulse-active 2s infinite;
    }

    .status-maintenance {
      background: #EF4444;
      box-shadow: 0 0 10px #EF4444;
      animation: pulse-warning 2s infinite;
    }

    .status-idle {
      background: #6B7280;
      animation: pulse-idle 2s infinite;
    }

    @keyframes pulse-active {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes pulse-warning {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes pulse-idle {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 0.3; }
    }

    /* Confidence Meter */
    .confidence-meter {
      background: #1e293b;
      border-radius: 10px;
      height: 8px;
      overflow: hidden;
      position: relative;
    }

    .confidence-bar {
      height: 100%;
      background: linear-gradient(90deg, #00F0A0, #6366F1);
      border-radius: 10px;
      transition: width 2s ease;
      position: relative;
    }

    .confidence-glow {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: slide 2s ease infinite;
    }

    @keyframes slide {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(200%); }
    }

    /* Weather Icons Animation */
    .weather-sunny { animation: rotate 10s linear infinite; }
    .weather-windy { animation: sway 2s ease-in-out infinite; }
    .weather-cloudy { animation: drift 8s ease-in-out infinite; }

    @keyframes rotate { 
      0% { transform: rotate(0deg); } 
      100% { transform: rotate(360deg); } 
    }

    @keyframes sway { 
      0%, 100% { transform: translateX(0); } 
      50% { transform: translateX(10px); } 
    }

    @keyframes drift { 
      0%, 100% { opacity: 0.7; } 
      50% { opacity: 1; } 
    }

    /* Chart Container */
    .chart-container {
      background: #1e293b;
      border-radius: 15px;
      border: 2px solid #00F0A0;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,240,160,0.2);
    }

    /* Alert System */
    .alert {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 10px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.5s ease;
    }

    .alert.slide-in {
      transform: translateX(0);
    }

    .alert.slide-out {
      transform: translateX(100%);
    }

    .alert-success {
      background: #00F0A0;
      color: #0f172a;
    }

    .alert-warning {
      background: #EF4444;
      color: white;
    }

    .alert-info {
      background: #6366F1;
      color: white;
    }

    /* Typewriter Effect */
    .typewriter {
      border-right: 2px solid #00F0A0;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 50% { border-color: transparent; }
      51%, 100% { border-color: #00F0A0; }
    }
  </style>
</head>

<body class="p-6 flex justify-center items-start min-h-screen">
  
  <!-- Particle Background -->
  <div id="particles"></div>

  <div class="bg-gray-800 p-10 rounded-2xl max-w-7xl w-full border border-gray-700 relative z-10">

    <!-- Header -->
    <header class="flex items-center justify-between mb-8 pb-4 border-b-4 border-zen-blue">
      <h3 class="text-4xl font-extrabold holographic flex items-center gap-3">
        <i class="fa-solid fa-brain text-zen-green weather-sunny"></i> HydroZen - H2 Booster Interface
      </h3>
      <div class="flex items-center gap-3">
        <div class="w-4 h-4 bg-zen-green rounded-full status-active"></div>
        <span class="text-zen-green font-bold text-lg">ONLINE</span>
      </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

      <!-- Left Panel - AI Chat -->
      <div class="space-y-6">
        
        <div class="ai-panel p-6 rounded-xl">
          <p class="text-xl font-bold text-zen-green flex items-center mb-4">
            <i class="fas fa-comments mr-3 weather-windy"></i> AI CONVERSATION
          </p>
          
          <!-- Chat Messages -->
          <div id="chatMessages" class="h-80 overflow-y-auto space-y-4 mb-4 pr-2">
            <div class="message-ai p-4 rounded-lg">
              <div class="flex items-start gap-3">
                <i class="fas fa-robot text-zen-green text-xl mt-1"></i>
                <div>
                  <p class="font-bold text-zen-green">AI Assistant</p>
                  <p class="text-gray-200 mt-1">Hello! I'm your hydrogen plant AI assistant. Ask me about weather optimization, maintenance predictions, or production analysis.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Chat Input -->
          <div class="flex gap-3">
            <input 
              type="text" 
              id="userInput" 
              class="chat-input flex-1"
              placeholder="Ask about weather, maintenance, or production..."
            />
            <button id="sendBtn" class="btn-send">
              <span><i class="fas fa-paper-plane"></i></span>
            </button>
          </div>

          <!-- Quick Questions -->
          <div class="mt-4">
            <p class="text-sm font-bold text-gray-400 mb-3">QUICK QUESTIONS:</p>
            <div class="grid grid-cols-1 gap-2">
              <button class="quick-btn" onclick="askQuestion('weather')">
                <i class="fas fa-sun"></i> Weather Optimization
              </button>
              <button class="quick-btn" onclick="askQuestion('maintenance')">
                <i class="fas fa-wrench"></i> Maintenance Status
              </button>
              <button class="quick-btn" onclick="askQuestion('production')">
                <i class="fas fa-industry"></i> Production Analysis
              </button>
            </div>
          </div>
        </div>

        <!-- System Status -->
        <div class="p-6 bg-gray-700 rounded-xl border-2 border-zen-blue/50">
          <p class="text-lg font-bold text-zen-blue flex items-center mb-4">
            <i class="fas fa-cogs mr-3"></i> SYSTEM STATUS
          </p>
          
          <div class="space-y-3">
            <div class="flex items-center">
              <div class="status-dot status-active"></div>
              <span class="text-white font-medium">Electrolyzer 1: ONLINE</span>
            </div>
            <div class="flex items-center">
              <div class="status-dot status-maintenance"></div>
              <span class="text-white font-medium">Electrolyzer 2: MAINTENANCE</span>
            </div>
            <div class="flex items-center">
              <div class="status-dot status-active"></div>
              <span class="text-white font-medium">Storage Tank: OPERATIONAL</span>
            </div>
            <div class="flex items-center">
              <div class="status-dot status-idle"></div>
              <span class="text-white font-medium">Backup System: STANDBY</span>
            </div>
          </div>
        </div>

      </div>

      <!-- Right Panel - Live Data -->
      <div class="lg:col-span-2 space-y-6">

        <!-- Live Production Chart -->
        <div class="chart-container">
          <p class="text-xl font-bold text-zen-green flex items-center mb-4">
            <i class="fas fa-chart-line mr-3"></i> LIVE PRODUCTION MONITORING
          </p>
          <div class="h-64 w-full">
            <canvas id="productionChart"></canvas>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          
          <!-- Weather Card -->
          <div id="weatherCard" class="weather-excellent p-6 rounded-xl">
            <p class="text-xl font-bold text-zen-green flex items-center mb-4">
              <i id="weatherIcon" class="fas fa-sun mr-3 weather-sunny"></i> LIVE WEATHER DATA
            </p>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <p class="text-sm font-bold text-gray-400">TEMPERATURE</p>
                <p id="temperature" class="text-2xl font-extrabold text-white">28°C</p>
              </div>
              <div>
                <p class="text-sm font-bold text-gray-400">SOLAR</p>
                <p id="solar" class="text-2xl font-extrabold text-zen-green">850 W/m²</p>
              </div>
              <div>
                <p class="text-sm font-bold text-gray-400">WIND</p>
                <p id="wind" class="text-2xl font-extrabold text-zen-blue">15 km/h</p>
              </div>
              <div>
                <p class="text-sm font-bold text-gray-400">CONDITIONS</p>
                <p id="conditions" class="text-lg font-extrabold text-zen-green">EXCELLENT</p>
              </div>
            </div>
          </div>

          <!-- AI Recommendations -->
          <div class="p-6 bg-gray-700 rounded-xl border-2 border-zen-green/50">
            <p class="text-xl font-bold text-zen-green mb-4 flex items-center">
              <i class="fas fa-lightbulb mr-3"></i> AI RECOMMENDATIONS
            </p>
            
            <div id="currentRecommendation" class="space-y-3">
              <p class="text-lg font-bold text-white">Analyzing current conditions...</p>
              <div class="confidence-meter">
                <div id="confidenceBar" class="confidence-bar" style="width: 0%">
                  <div class="confidence-glow"></div>
                </div>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Confidence:</span>
                <span id="confidence" class="text-zen-green font-bold">--</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Expected Savings:</span>
                <span id="savings" class="text-zen-green font-bold">$--/day</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Maintenance Alerts -->
        <div class="p-6 bg-gray-700 rounded-xl border-2 border-zen-red/50">
          <p class="text-xl font-bold text-zen-red mb-4 flex items-center">
            <i class="fas fa-exclamation-triangle mr-3"></i> MAINTENANCE ALERTS
          </p>
          
          <div class="space-y-3">
            <div class="flex items-start gap-3 p-3 bg-gray-600 rounded-lg">
              <i class="fas fa-filter text-zen-red text-lg mt-1"></i>
              <div>
                <p class="font-bold text-white">Filter Replacement Due</p>
                <p class="text-sm text-gray-300">Electrolyzer 1 - Efficiency at 78%</p>
                <p class="text-sm text-zen-red font-bold">Due in 3 days</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Interactive SVG Plant Digital Twin -->
      <div class="ai-panel p-6 rounded-xl mt-8">
        <p class="text-xl font-bold text-zen-blue flex items-center mb-4">
          <i class="fas fa-industry mr-3"></i> PLANT DIGITAL TWIN (Interactive)
        </p>
        <div class="flex flex-col lg:flex-row gap-4">
          <!-- SVG Plant Drawing -->
          <svg id="plantSVG" class="w-full max-w-xs h-52" viewBox="0 0 400 200">
            <rect id="electrolyzer" x="30" y="50" width="60" height="100" rx="16" fill="#00F0A0"
              class="cursor-pointer opacity-70 hover:opacity-100" />
            <circle id="storage" cx="160" cy="100" r="40" fill="#6366F1"
              class="cursor-pointer opacity-70 hover:opacity-100" />
            <rect id="pipeline" x="90" y="95" width="60" height="10" rx="4" fill="#EF4444"
              class="cursor-pointer opacity-70 hover:opacity-100" />
            <text x="30" y="45" fill="#fff" font-size="13">Electrolyzer</text>
            <text x="160" y="160" fill="#fff" font-size="13" text-anchor="middle">Storage</text>
            <text x="120" y="92" fill="#fff" font-size="11">Pipe</text>
          </svg>
          <!-- Info Panel -->
          <div id="plantInfo" class="flex-1 bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white font-medium flex items-center">
            <span class="text-gray-400">Click a component</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dynamic AI Recommendations Array
    const recommendations = [
      {
        text: "Start both electrolyzers for maximum production. Excellent renewable conditions detected.",
        confidence: 95,
        savings: "$127/day"
      },
      {
        text: "Single electrolyzer operation recommended. Good renewable energy availability.",
        confidence: 87,
        savings: "$89/day"
      },
      {
        text: "Reduced production mode. Consider battery storage for stable operation.",
        confidence: 82,
        savings: "$45/day"
      },
      {
        text: "Weather expected to shift: prepare for peak production window 1-3pm.",
        confidence: 90,
        savings: "$101/day"
      },
      {
        text: "Maintenance alert: filter replacement window opens soon. Pre-schedule to optimize uptime.",
        confidence: 88,
        savings: "$74/day"
      }
    ];
    let recIdx = 0;

    // Animated AI Recommendation cycling (outside HydroAI class)
    function updateAIRecommendationAnimated() {
      recIdx = (recIdx + 1) % recommendations.length;
      const rec = recommendations[recIdx];

      const confidenceBar = document.getElementById('confidenceBar');
      const prevWidth = confidenceBar ? parseFloat(confidenceBar.style.width) : 0;

      document.getElementById('currentRecommendation').innerHTML = `
        <p class="text-lg font-bold text-white">${rec.text}</p>
        <div class="confidence-meter my-2">
          <div id="confidenceBar" class="confidence-bar" style="width:${prevWidth}%;">
            <div class="confidence-glow"></div>
          </div>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-400">Confidence:</span>
          <span id="confidence" class="text-zen-green font-bold">${rec.confidence}%</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-400">Expected Savings:</span>
          <span id="savings" class="text-zen-green font-bold">${rec.savings}</span>
        </div>
      `;

      // Animate confidence bar
      setTimeout(() => {
        document.getElementById('confidenceBar').style.transition = 'width 2s cubic-bezier(0.4,0,0.2,1)';
        document.getElementById('confidenceBar').style.width = rec.confidence + '%';
      }, 100);
    }

    // Enhanced AI system with all dynamic elements
    class HydroAI {
      constructor() {
        this.chatMessages = document.getElementById('chatMessages');
        this.userInput = document.getElementById('userInput');
        this.sendBtn = document.getElementById('sendBtn');
        this.productionData = [];
        this.timeLabels = [];
        this.setupEventListeners();
        this.createParticles();
        this.initChart();
        this.updateWeatherData();
        this.updateRecommendations();
        
        // Auto-update every 5 seconds for chart
        setInterval(() => {
          this.updateProductionChart();
        }, 5000);
        
        // Auto-update weather every 30 seconds
        setInterval(() => {
          this.updateWeatherData();
          this.updateRecommendations();
        }, 30000);

        // Initial alert
        setTimeout(() => {
          this.showAlert('success', 'AI System Initialized Successfully!');
        }, 2000);
      }

      setupEventListeners() {
        this.sendBtn.addEventListener('click', () => this.sendMessage());
        this.userInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.sendMessage();
        });
        this.userInput.focus();
      }

      createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 30; i++) {
          const particle = document.createElement('div');
          particle.className = 'data-particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 8 + 's';
          particle.style.animationDuration = (8 + Math.random() * 4) + 's';
          particlesContainer.appendChild(particle);
        }
      }

      initChart() {
        const ctx = document.getElementById('productionChart').getContext('2d');
        this.chart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: this.timeLabels,
            datasets: [{
              label: 'H₂ Production (kg/hr)',
              data: this.productionData,
              borderColor: '#00F0A0',
              backgroundColor: 'rgba(0,240,160,0.1)',
              borderWidth: 3,
              tension: 0.4,
              pointRadius: 4,
              pointBackgroundColor: '#00F0A0',
              pointBorderColor: '#ffffff',
              pointBorderWidth: 2,
              fill: true
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
              duration: 1000,
              easing: 'easeOutQuart'
            },
            scales: {
              y: {
                min: 0,
                max: 150,
                title: {
                  display: true,
                  text: 'Production Rate (kg/hr)',
                  color: '#ffffff',
                  font: { size: 14, weight: 'bold' }
                },
                ticks: { color: '#ffffff' },
                grid: { color: 'rgba(255,255,255,0.1)' }
              },
              x: {
                title: {
                  display: true,
                  text: 'Time',
                  color: '#ffffff',
                  font: { size: 14, weight: 'bold' }
                },
                ticks: { color: '#ffffff' },
                grid: { color: 'rgba(255,255,255,0.1)' }
              }
            },
            plugins: {
              legend: {
                labels: { 
                  color: '#ffffff', 
                  font: { weight: 'bold' },
                  usePointStyle: true
                }
              }
            }
          }
        });

        // Initialize with some data
        this.updateProductionChart();
      }

      updateProductionChart() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-US', { 
          hour12: false, 
          hour: '2-digit', 
          minute: '2-digit' 
        });

        // Generate realistic production data based on weather
        const weather = this.getCurrentWeatherData();
        let baseProduction = 85;
        
        if (weather.solar > 750) baseProduction = 120 + Math.random() * 25;
        else if (weather.solar > 400) baseProduction = 85 + Math.random() * 20;
        else baseProduction = 50 + Math.random() * 15;

        this.productionData.push(Math.round(baseProduction));
        this.timeLabels.push(timeStr);

        // Keep only last 20 data points
        if (this.productionData.length > 20) {
          this.productionData.shift();
          this.timeLabels.shift();
        }

        this.chart.update('none'); // Smooth update without animation
      }

      sendMessage() {
        const message = this.userInput.value.trim();
        if (!message) return;

        // Play send sound effect (would need audio file)
        // this.playSound('send');

        this.addMessage(message, 'user');
        this.userInput.value = '';
        
        this.showTypingIndicator();
        setTimeout(() => {
          this.hideTypingIndicator();
          const response = this.getAIResponse(message);
          this.typewriterResponse(response);
          this.updateRecommendations();
          this.showAlert('info', 'AI Analysis Complete');
        }, 2000);
      }

      addMessage(content, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message-${sender} p-4 rounded-lg`;
        
        if (sender === 'ai') {
          messageDiv.innerHTML = `
            <div class="flex items-start gap-3">
              <i class="fas fa-robot text-zen-green text-xl mt-1"></i>
              <div>
                <p class="font-bold text-zen-green">AI Assistant</p>
                <p class="ai-text text-gray-200 mt-1">${content}</p>
              </div>
            </div>
          `;
        } else {
          messageDiv.innerHTML = `
            <div class="flex items-start gap-3 justify-end">
              <div class="text-right">
                <p class="font-bold text-white">You</p>
                <p class="text-white mt-1">${content}</p>
              </div>
              <i class="fas fa-user text-white text-xl mt-1"></i>
            </div>
          `;
        }
        
        this.chatMessages.appendChild(messageDiv);
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
        return messageDiv;
      }

      typewriterResponse(text) {
        const messageDiv = this.addMessage('', 'ai');
        const textElement = messageDiv.querySelector('.ai-text');
        textElement.classList.add('typewriter');
        
        let i = 0;
        const typeInterval = setInterval(() => {
          textElement.textContent += text[i];
          i++;
          if (i >= text.length) {
            clearInterval(typeInterval);
            textElement.classList.remove('typewriter');
          }
        }, 30); // 30ms per character
      }

      showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message-ai p-4 rounded-lg typing-indicator';
        typingDiv.innerHTML = `
          <div class="flex items-start gap-3">
            <i class="fas fa-robot text-zen-green text-xl mt-1"></i>
            <div>
              <p class="font-bold text-zen-green">AI Assistant</p>
              <p class="text-gray-200 mt-1">
                <span class="inline-block w-2 h-2 bg-zen-green rounded-full mr-1 animate-bounce"></span>
                <span class="inline-block w-2 h-2 bg-zen-green rounded-full mr-1 animate-bounce" style="animation-delay: 0.1s"></span>
                <span class="inline-block w-2 h-2 bg-zen-green rounded-full animate-bounce" style="animation-delay: 0.2s"></span>
              </p>
            </div>
          </div>
        `;
        this.chatMessages.appendChild(typingDiv);
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
      }

      hideTypingIndicator() {
        const indicator = this.chatMessages.querySelector('.typing-indicator');
        if (indicator) indicator.remove();
      }

      showAlert(type, message) {
        const alert = document.createElement('div');
        alert.className = `alert alert-${type}`;
        alert.innerHTML = `
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
          <span>${message}</span>
        `;
        
        document.body.appendChild(alert);
        
        setTimeout(() => alert.classList.add('slide-in'), 100);
        setTimeout(() => alert.classList.add('slide-out'), 4000);
        setTimeout(() => alert.remove(), 4500);
      }

      getAIResponse(question) {
        const responses = {
          weather: `Based on current solar irradiance of ${this.getCurrentWeatherData().solar}W/m² and wind at ${this.getCurrentWeatherData().wind} km/h, I recommend ${this.getCurrentWeatherData().solar > 750 ? 'starting both electrolyzers for maximum 145 kg/hr production' : 'single electrolyzer operation at 85 kg/hr'}. This configuration will save approximately $${this.getCurrentWeatherData().solar > 750 ? '127' : '89'}/day through optimal renewable energy utilization.`,
          maintenance: `Electrolyzer 1 shows filter saturation with current efficiency at 78%. Predictive analysis indicates filter replacement required in 3 days. Preventive action now will save $2,450 vs reactive maintenance. I've scheduled the optimal maintenance window for minimal production impact.`,
          production: `Production analysis shows current output at ${this.productionData[this.productionData.length - 1] || 85} kg/hr. Recent fluctuations are due to solar variability. System automatically compensated by optimizing electrolyzer parameters. Overall efficiency remains at 94% of target.`
        };

        for (let [key, response] of Object.entries(responses)) {
          if (question.toLowerCase().includes(key)) {
            return response;
          }
        }

        return "I can help you with weather optimization, production analysis, maintenance scheduling, and safety monitoring. My AI algorithms continuously analyze plant data to provide predictive insights and optimization recommendations. What specific aspect would you like me to analyze?";
      }

      getCurrentWeatherData() {
        return {
          solar: parseInt(document.getElementById('solar').textContent),
          wind: parseInt(document.getElementById('wind').textContent),
          temperature: parseInt(document.getElementById('temperature').textContent)
        };
      }

      updateWeatherData() {
        // Enhanced realistic weather simulation
        const hour = new Date().getHours();
        let solarBase, weatherClass, weatherIcon, conditions;
        
        // Solar based on time of day with variations
        if (hour >= 6 && hour <= 8) {
          solarBase = 300 + Math.random() * 200; // Morning
          weatherIcon = 'fa-sun';
          weatherClass = 'weather-sunny';
        } else if (hour >= 9 && hour <= 15) {
          solarBase = 700 + Math.random() * 250; // Peak hours
          weatherIcon = 'fa-sun';
          weatherClass = 'weather-sunny';
        } else if (hour >= 16 && hour <= 18) {
          solarBase = 200 + Math.random() * 300; // Evening
          weatherIcon = 'fa-cloud-sun';
          weatherClass = 'weather-cloudy';
        } else {
          solarBase = 0; // Night
          weatherIcon = 'fa-moon';
          weatherClass = 'weather-cloudy';
        }
        
        const solar = Math.max(0, Math.round(solarBase));
        const temp = Math.round(28 + Math.sin(hour * Math.PI / 12) * 6 + (Math.random() - 0.5) * 4);
        const wind = Math.round(10 + Math.sin(hour * Math.PI / 8) * 5 + (Math.random() - 0.5) * 8);

        // Determine conditions and styling
        if (solar > 750 && wind > 12) {
          conditions = 'EXCELLENT';
          weatherClass = 'weather-excellent';
        } else if (solar > 400 || wind > 8) {
          conditions = 'GOOD';
          weatherClass = 'weather-good';
        } else {
          conditions = 'LIMITED';
          weatherClass = 'weather-poor';
        }

        // Update display
        document.getElementById('temperature').textContent = `${temp}°C`;
        document.getElementById('solar').textContent = `${solar} W/m²`;
        document.getElementById('wind').textContent = `${wind} km/h`;
        document.getElementById('conditions').textContent = conditions;

        // Update weather card styling
        const weatherCard = document.getElementById('weatherCard');
        const weatherIconElement = document.getElementById('weatherIcon');
        
        weatherCard.classList.remove('weather-excellent', 'weather-good', 'weather-poor');
        weatherCard.classList.add(weatherClass);
        
        weatherIconElement.className = `fas ${weatherIcon} mr-3 ${weatherClass.replace('weather-', 'weather-')}`;

        return { solar, temp, wind };
      }

      updateRecommendations() {
        const weather = this.updateWeatherData();
        let recommendation, confidence, savings, confidenceNum;

        if (weather.solar > 750 && weather.wind > 12) {
          recommendation = "Start both electrolyzers for maximum production. Excellent renewable conditions detected.";
          confidence = "95%";
          confidenceNum = 95;
          savings = "$127";
        } else if (weather.solar > 500 || weather.wind > 8) {
          recommendation = "Single electrolyzer operation recommended. Good renewable energy availability.";
          confidence = "87%";
          confidenceNum = 87;
          savings = "$89";
        } else {
          recommendation = "Reduced production mode. Consider battery storage for stable operation.";
          confidence = "82%";
          confidenceNum = 82;
          savings = "$45";
        }

        // Update confidence bar
        document.getElementById('confidenceBar').style.width = confidenceNum + '%';

        document.getElementById('currentRecommendation').innerHTML = `
          <p class="text-lg font-bold text-white">${recommendation}</p>
          <div class="confidence-meter">
            <div class="confidence-bar" style="width: ${confidenceNum}%">
              <div class="confidence-glow"></div>
            </div>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-400">Confidence:</span>
            <span class="text-zen-green font-bold">${confidence}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-400">Expected Savings:</span>
            <span class="text-zen-green font-bold">${savings}/day</span>
          </div>
        `;
      }
    }

    // Quick question functions
    function askQuestion(type) {
      const questions = {
        weather: "What's the optimal production schedule based on current weather conditions?",
        maintenance: "What maintenance is needed for our equipment and when?",
        production: "Analyze current hydrogen production performance and suggest improvements"
      };
      
      document.getElementById('userInput').value = questions[type];
      document.getElementById('sendBtn').click();
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', () => {
      window.hydroAI = new HydroAI();
      console.log('🤖 HOTTY HYDRA AI System with Dynamic Elements Initialized!');
      // Interactive SVG Plant Digital Twin logic
      const componentData = {
        electrolyzer: {
          name: "Electrolyzer",
          info: "Electrolyzer 1: <span class='text-zen-green font-bold'>ONLINE</span><br>Efficiency: <b>78%</b><br>Last maintenance: 2 days ago.<br>AI Suggests: <span class='text-zen-green'>Monitor temperature, replace filter in 3 days.</span>"
        },
        storage: {
          name: "Hydrogen Storage Tank",
          info: "Storage Level: <b>43%</b><br>Pressure: <b>350 bar</b><br>AI Suggests: <span class='text-zen-blue'>Safe range. Ready for dispatch.</span>"
        },
        pipeline: {
          name: "H2 Pipeline",
          info: "Flow Rate: <b>91 Nm³/h</b><br>Status: <span class='text-zen-green font-bold'>NORMAL</span><br>AI Suggests: <span class='text-zen-green'>No leaks detected. All sensors operational.</span>"
        }
      };
      ["electrolyzer", "storage", "pipeline"].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.addEventListener('click', function() {
            document.getElementById('plantInfo').innerHTML = `
              <div>
                <span class='font-bold text-zen-blue'>${componentData[id].name}</span><br>
                ${componentData[id].info}
              </div>
            `;
          });
        }
      });
      // Call animated AI recommendation cycling at startup
      updateAIRecommendationAnimated();
      // For demo: cycle every 10 seconds (use 900000 for 15 min in prod)
      setInterval(updateAIRecommendationAnimated, 10000);
    });
  </script>

</body>
</html>
